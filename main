<!DOCTYPE html>
<html>
<head>
  <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
  <style>
    body { margin: 0; overflow: hidden; }
    #container {
      width: 100vw; height: 100vh;
      overflow: hidden;
      position: relative;
      background: #f0f0f0;
      cursor: grab;
    }
    #diagram {
      transform-origin: 0 0;
      position: absolute;
      left: 0; top: 0;
    }
  </style>
</head>
<body>
  <div id="container">
    <div id="diagram" class="mermaid">
flowchart TD 
    A["Кто вы и что хотите сделать?"] --> B("Авторы идей") & C("Предприниматели и малый бизнес") & D("Начинающие стартапы") & E("Инвесторы и партнеры")
    B --> F["Какую цель вы преследуете?"]
    C --> G["Какую цель вы преследуете?"]
    D --> H["Какую цель вы преследуете?"]
    E --> I["Какую цель вы преследуете?"]
    F --> J("Участвовать в конкурсе") & K("Научиться и развиться") & L("Защитить свою идею") & M("Получить грант")
    G --> N("Получить финансирование") & O("Найти инфраструктуру") & P("Найти партнеров")
    H --> Q("Привлечь инвестиции") & R("Защитить свою идею") & S("Получить поддержку") & T("Развивать инновации")
    I --> U("Инвестировать в проекты") & V("Получить экспертизу")
    J --> W["Какой у вас опыт в конкурсах?"]
    K --> X["Какая тема вас интересует?"]
    L --> Y["Где хотите защитить идею?"] & Z["Как хотите защитить идею?"]
    M --> AA["На что нужен грант?"]
    N --> AB["Есть ли у вас бюджет?"]
    O --> AC["Что вам нужно?"]
    P --> AD["Для чего вам партнеры?"]
    Q --> AE["Готовы ли вы презентовать идею?"] & AF["Готовы ли вы к большому шагу?"]
    R --> AG["Где хотите защитить идею?"]
    S --> AH["Какую поддержку вы ищете?"]
    T --> AI["Какую технологию вы хотите развивать?"]
    U --> AJ["Как хотите инвестировать?"]
    V --> AK["Что вам нужно?"]
    W --> AL("Новичок") & AR("Есть проекты")
    AL --> AM["Хотите конкурс для молодых талантов?"]
    AM --> AN("Да") & AP("Нет")
    AN --> AO["Результат: Подать заявку на конкурс Новатор Москвы. Альтернатива: Участвовать в Аэротон 2024"]
    AP --> AQ["Результат: Участвовать в Аэротон 2024. Альтернатива: Подать заявку на хакатон Лидеры цифровой трансформации"]
    AR --> AS["Какой конкурс вам интересен?"]
    AS --> AT("Для новичков") & AV("Для цифровизации")
    AT --> AU["Результат: Подать заявку на конкурс Новатор Москвы. Альтернатива: Участвовать в Аэротон 2024"]
    AV --> AW["Результат: Подать заявку на хакатон Лидеры цифровой трансформации. Альтернатива: Подать заявку на конкурс Новатор Москвы"]
    X --> AX("Создание стартапов") & AZ("Управление ИС") & BB("Венчурные инвестиции")
    AX --> AY["Результат: Пройти акселератор Академия инноваторов. Альтернатива: Пройти обучение в Венчурной академии"]
    AZ --> BA["Результат: Повысить знания в области интеллектуальной собственности. Альтернатива: Освоить управление через IP-упаковку"]
    BB --> BC["Результат: Пройти обучение в Венчурной академии. Альтернатива: Пройти акселератор Академия инноваторов"]
    Y --> BD("В России") & BF("За рубежом") & BH("Не знаю")
    BD --> BE["Результат: Получить грант на патентование в России. Альтернатива: Освоить управление через IP-упаковку"]
    BF --> BG["Результат: Компенсировать патентование за рубежом. Альтернатива: Освоить управление через IP-упаковку"]
    BH --> BI["Результат: Получить консультации по интеллектуальной собственности. Альтернатива: Получить грант на патентование в России"]
    Z --> BJ("Патент") & BL("Управление ИС")
    BJ --> BK["Результат: Получить грант на патентование в России. Альтернатива: Компенсировать патентование за рубежом"]
    BL --> BM["Результат: Освоить управление через IP-упаковку. Альтернатива: Получить консультации по интеллектуальной собственности"]
    AA --> BN("На тестирование идей") & BP("На обучение")
    BN --> BO["Результат: Получить грант на пилотное тестирование инноваций. Альтернатива: Получить субсидию на обучение сотрудников"]
    BP --> BQ["Результат: Получить субсидию на обучение сотрудников. Альтернатива: Получить грант на пилотное тестирование инноваций"]
    AB --> BR("Нет") & BT("Да")
    BR --> BS["Результат: Получить грант до 30 млн. Альтернатива: Получить грант на установку постаматов"]
    BT --> BU["Результат: Оформить кредит под залог интеллектуальной собственности. Альтернатива: Вернуть кэшбек бизнес-ангелам"]
    AC --> BV("Помещения") & BX("Технологии")
    BV --> BW["Результат: Арендовать помещение через кластер. Альтернатива: Получить льготы в технопарках Москвы"]
    BX --> BY["Результат: Использовать ресурсы кластера Ломоносов. Альтернатива: Провести испытания материалов и продуктов"] & BZ["Результат: Получить поддержку для беспилотных авиационных систем. Альтернатива: Использовать инновации для улучшения городской среды"] & CA["Результат: Создать решения в центре ассистивных технологий. Альтернатива: Провести испытания материалов и продуктов"]
    AD --> CB("Для экспорта") & CD("Для пилотных проектов") & CF("Для кооперации")
    CB --> CC["Результат: Получить меры поддержки для экспорта. Альтернатива: Протестировать инновации через пилотирование"]
    CD --> CE["Результат: Протестировать инновации через пилотирование. Альтернатива: Получить меры поддержки для экспорта"]
    CF --> CG["Результат: Оптимизировать кооперацию через Техномаркет. Альтернатива: Создать проекты через межотраслевые кластеры"] & CH["Результат: Найти исполнителей для исследований и разработок. Альтернатива: Создать прототип через прототипирование"] & CI["Результат: Создать прототип через прототипирование и проектирование. Альтернатива: Запустить контрактное производство"] & CJ["Результат: Запустить контрактное производство. Альтернатива: Создать прототип через прототипирование"]
    AE --> CK("Да") & CM("Нет")
    CK --> CL["Результат: Найти стартап через витрину стартапов. Альтернатива: Подготовить инвестиционную упаковку для стартапа"]
    CM --> CN["Результат: Подготовить инвестиционную упаковку для стартапа. Альтернатива: Пройти инвестиционную экспертизу проекта"]
    AF --> CO("Да") & CQ("Нет")
    CO --> CP["Результат: Пройти программу Путь к IPO. Альтернатива: Подготовить инвестиционную упаковку для стартапа"]
    CQ --> CR["Результат: Подготовить инвестиционную упаковку для стартапа. Альтернатива: Пройти инвестиционную экспертизу проекта"]
    AG --> CS("В России") & CU("За рубежом")
    CS --> CT["Результат: Получить грант на патентование в России. Альтернатива: Освоить управление через IP-упаковку"]
    CU --> CV["Результат: Компенсировать патентование за рубежом. Альтернатива: Освоить управление через IP-упаковку"]
    AH --> CW("Регистрация") & CY("Гранты")
    CW --> CX["Результат: Включиться в реестр стартапов. Альтернатива: Получить грант на пилотное тестирование инноваций"]
    CY --> CZ["Результат: Получить грант на пилотное тестирование инноваций. Альтернатива: Включиться в реестр стартапов"]
    AI --> DA("Для города") & DC("Беспилотники")
    DA --> DB["Результат: Использовать инновации для улучшения городской среды. Альтернатива: Получить поддержку для беспилотных авиационных систем"]
    DC --> DD["Результат: Получить поддержку для беспилотных авиационных систем. Альтернатива: Использовать инновации для улучшения городской среды"]
    AJ --> DE("Напрямую в стартапы") & DG("Через фонд") & DI("С кэшбеком")
    DE --> DF["Результат: Найти стартап через витрину стартапов. Альтернатива: Изучить инвестиционные инструменты в России"]
    DG --> DH["Результат: Инвестировать через Московский венчурный фонд. Альтернатива: Вернуть кэшбек бизнес-ангелам"]
    DI --> DJ["Результат: Вернуть кэшбек бизнес-ангелам. Альтернатива: Инвестировать через Московский венчурный фонд"]
    AK --> DK("Обучение") & DM("Экспертиза")
    DK --> DL["Результат: Пройти обучение в Венчурной академии. Альтернатива: Пройти инвестиционную экспертизу проектов"]
    DM --> DN["Результат: Пройти инвестиционную экспертизу проектов. Альтернатива: Пройти обучение в Венчурной академии"]
   </div>
  </div>

<script>
  mermaid.initialize({
    startOnLoad: true,
    theme: 'default',
    themeVariables: {
      primaryColor: '#e3f2fd',
      primaryBorderColor: '#90caf9',
      primaryTextColor: '#0d47a1',
      lineColor: '#64b5f6',
      textColor: '#1a237e',
      fontSize: '16px',
      fontFamily: 'Arial'
    },
    flowchart: {
      useMaxWidth: false,
      curve: 'basis'
    },
    layout: 'elk'
  });

  const container = document.getElementById('container');
  const diagram = document.getElementById('diagram');

  let scale = 1;
  let offsetX = 0, offsetY = 0;
  let isDragging = false;
  let startX = 0, startY = 0;

  function updateTransform() {
    diagram.style.transform = `translate(${offsetX}px, ${offsetY}px) scale(${scale})`;
  }

  // Зум с фокусом на курсоре
  container.addEventListener('wheel', (e) => {
    e.preventDefault();

    const zoomSpeed = 0.001; // чем меньше — тем плавнее
    const zoomDelta = -e.deltaY * zoomSpeed;

    const newScale = scale * (1 + zoomDelta);
    const rect = diagram.getBoundingClientRect();

    const cursorX = e.clientX - rect.left;
    const cursorY = e.clientY - rect.top;

    offsetX -= cursorX * (newScale - scale) / scale;
    offsetY -= cursorY * (newScale - scale) / scale;

    scale = newScale;

    updateTransform();
  }, { passive: false });

  // Перетаскивание
  container.addEventListener('mousedown', (e) => {
    isDragging = true;
    startX = e.clientX;
    startY = e.clientY;
    container.style.cursor = 'grabbing';
  });

  container.addEventListener('mouseup', () => {
    isDragging = false;
    container.style.cursor = 'grab';
  });

  container.addEventListener('mouseleave', () => {
    isDragging = false;
    container.style.cursor = 'grab';
  });

  container.addEventListener('mousemove', (e) => {
    if (!isDragging) return;
    const dx = e.clientX - startX;
    const dy = e.clientY - startY;
    offsetX += dx;
    offsetY += dy;
    startX = e.clientX;
    startY = e.clientY;
    updateTransform();
  });

  updateTransform(); // начальная отрисовка
</script>
</body>
</html>
